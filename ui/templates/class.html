<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{if .ActiveClass}}{{.ActiveClass.SimpleName}} - {{end}}Javalyzer</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="/static/turbo.js"></script>
    <script src="/static/app.js" defer></script>
</head>
<body>
    <div class="layout">
        <aside class="sidebar">
            <h1><a href="/">Javalyzer</a></h1>
            <div class="sidebar-search">
                <input type="text" 
                       placeholder="Search classes..." 
                       id="class-search"
                       name="q"
                       autocomplete="off">
                <span class="search-count">{{.TotalMatches}}</span>
            </div>
            <turbo-frame id="class-list" data-turbo-action="replace">
                <nav id="class-nav" class="class-list">
                    {{range .Classes}}
                    <a href="/c/{{.Name}}" class="class-item{{if $.ActiveClass}}{{if eq $.ActiveClass.Name .Name}} active{{end}}{{end}}">
                        <span class="class-type">{{if eq .Kind "interface"}}I{{else if eq .Kind "enum"}}E{{else if eq .Kind "annotation"}}@{{else if eq .Kind "record"}}R{{else}}C{{end}}</span>
                        {{if .Package}}<span class="class-package" title="{{.Package}}">{{.Package}}</span>{{end}}
                        <span class="class-name" title="{{.Name}}">{{.SimpleName}}</span>
                    </a>
                    {{else}}
                    <p class="empty">No classes loaded. <a href="/">Start a scan</a></p>
                    {{end}}
                    {{if .HasMore}}
                    <p class="more-results">+ {{sub .TotalMatches (len .Classes)}} more â€” refine your search</p>
                    {{end}}
                </nav>
            </turbo-frame>
        </aside>
        <main class="content">
            {{if .ActiveClass}}
            <header class="class-header">
                <h2>
                    {{if eq .ActiveClass.Kind "interface"}}interface{{else if eq .ActiveClass.Kind "enum"}}enum{{else if eq .ActiveClass.Kind "annotation"}}@interface{{else if eq .ActiveClass.Kind "record"}}record{{else}}class{{end}}
                    <strong>{{.ActiveClass.SimpleName}}</strong>
                </h2>
                <div class="class-meta">
                    <span class="package">{{.ActiveClass.Package}}</span>
                    {{if .ActiveClass.SuperClass}}
                    <span class="extends">extends {{linkifyClass .KnownClasses .ActiveClass.SuperClass}}</span>
                    {{end}}
                    {{if .ActiveClass.Interfaces}}
                    <span class="implements">implements 
                        {{range $i, $iface := .ActiveClass.Interfaces}}{{if $i}}, {{end}}{{linkifyClass $.KnownClasses $iface}}{{end}}
                    </span>
                    {{end}}
                </div>
                {{if hasJavadoc .ActiveClass.Javadoc}}
                <div class="javadoc">{{formatJavadoc .ActiveClass.Javadoc}}</div>
                {{end}}
            </header>

            {{if .Implementers}}
            <section class="implementers">
                <h3>Known Implementers</h3>
                <ul>
                    {{range .Implementers}}
                    <li><a href="/c/{{.Name}}">{{.Name}}</a></li>
                    {{end}}
                </ul>
            </section>
            {{end}}

            {{with .ActiveClass.EnumConstants}}
            <section class="enum-constants">
                <h3>Enum Constants</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Arguments</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{range .}}
                        <tr>
                            <td class="name">{{.Name}}</td>
                            <td class="arguments">
                                {{if .Arguments}}({{range $i, $a := .Arguments}}{{if $i}}, {{end}}{{$a}}{{end}}){{end}}
                            </td>
                        </tr>
                        {{end}}
                    </tbody>
                </table>
            </section>
            {{end}}

            {{with .ActiveClass.Fields}}
            <section class="fields">
                <h3>Fields</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Visibility</th>
                            <th>Type</th>
                            <th>Name</th>
                            <th>Modifiers</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{range .}}
                        <tr>
                            <td class="visibility">{{.Visibility}}</td>
                            <td class="type">{{linkifyType $.KnownClasses .Type}}</td>
                            <td class="name">{{.Name}}</td>
                            <td class="modifiers">
                                {{if .IsStatic}}static{{end}}
                                {{if .IsFinal}}final{{end}}
                                {{if .IsVolatile}}volatile{{end}}
                                {{if .IsTransient}}transient{{end}}
                            </td>
                        </tr>
                        {{if hasJavadoc .Javadoc}}
                        <tr class="javadoc-row">
                            <td colspan="4" class="javadoc">{{formatJavadoc .Javadoc}}</td>
                        </tr>
                        {{end}}
                        {{end}}
                    </tbody>
                </table>
            </section>
            {{end}}

            {{with constructors .ActiveClass}}
            <section class="constructors">
                <h3>Constructors</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Visibility</th>
                            <th>Signature</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{range .}}
                        <tr>
                            <td class="visibility">{{.Visibility}}</td>
                            <td class="signature">
                                {{$.ActiveClass.SimpleName}}({{range $i, $p := .Parameters}}{{if $i}}, {{end}}{{linkifyType $.KnownClasses $p.Type}}{{if $p.Name}} {{$p.Name}}{{end}}{{end}})
                            </td>
                        </tr>
                        {{if hasJavadoc .Javadoc}}
                        <tr class="javadoc-row">
                            <td colspan="2" class="javadoc">{{formatJavadoc .Javadoc}}</td>
                        </tr>
                        {{end}}
                        {{end}}
                    </tbody>
                </table>
            </section>
            {{end}}

            <section class="methods">
                <h3>Methods</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Visibility</th>
                            <th>Return</th>
                            <th>Name</th>
                            <th>Parameters</th>
                            <th>Modifiers</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{range .ActiveClass.Methods}}
                        {{if not (isConstructor .)}}{{if not (isStaticInitializer .)}}{{if not .IsSynthetic}}{{if not .IsBridge}}
                        <tr>
                            <td class="visibility">{{.Visibility}}</td>
                            <td class="type">{{linkifyType $.KnownClasses .ReturnType}}</td>
                            <td class="name">{{.Name}}</td>
                            <td class="params">
                                {{range $i, $p := .Parameters}}{{if $i}}, {{end}}{{linkifyType $.KnownClasses $p.Type}}{{if $p.Name}} {{$p.Name}}{{end}}{{end}}
                            </td>
                            <td class="modifiers">
                                {{if .IsStatic}}static{{end}}
                                {{if .IsFinal}}final{{end}}
                                {{if .IsAbstract}}abstract{{end}}
                                {{if .IsSynchronized}}synchronized{{end}}
                                {{if .IsNative}}native{{end}}
                            </td>
                        </tr>
                        {{if hasJavadoc .Javadoc}}
                        <tr class="javadoc-row">
                            <td colspan="5" class="javadoc">{{formatJavadoc .Javadoc}}</td>
                        </tr>
                        {{end}}
                        {{end}}{{end}}{{end}}{{end}}
                        {{end}}
                    </tbody>
                </table>
            </section>
            {{else}}
            <div class="no-class">
                <p>Select a class from the sidebar to view its details.</p>
            </div>
            {{end}}
        </main>
    </div>
</body>
</html>
